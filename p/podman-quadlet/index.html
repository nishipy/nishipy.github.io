<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="E9eDpgSuhyY-l83ZkKb5xbL0_aUZixIZKfCXG2APiFM"><meta name=description content="Header Photo by Amy Asher on Unsplash
ğŸ¦­ ã¯ã˜ã‚ã« Red Hat Advent Calendar 2023 17æ—¥ç›®ã®è¨˜äº‹ğŸ…ã§ã™ã€‚ ã¡ãªã¿ã«ã™ã¹ã¦ å€‹äººã®è¦‹è§£ ã§ã™ã€‚
ğŸ¦­ podman generate systemd ã®éæ¨å¥¨åŒ–ã¨ Quadlet ã‚¨ãƒƒã‚¸ç­‰ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã€systemdã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ¦ãƒ‹ãƒƒãƒˆã¨ã—ã¦Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’åˆ¶å¾¡ã—ãŸã„å ´åˆã€å¾“æ¥ã¯ podman generate systemd ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã€æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸã€‚2023å¹´9æœˆã«ç™ºå£²ã•ã‚ŒãŸæ›¸ç±Podmanã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³(Podman in Actionã‚’Fedora 38/Podman v4.5.1ã‚’å‰æã«æ—¥æœ¬èªè¨³ã—ãŸã‚‚ã®) ã®ã€Œ7ç«  systemdã¨ã®çµ±åˆã€ã§ã‚‚ã€ã“ã®æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚
Podman v4.7.0 ã§ã€ã“ã® `podman generate systemd ã¯deprecated(éæ¨å¥¨)ã¨ãªã‚Šã¾ã—ãŸã€‚systemdã®ã‚‚ã¨ã§Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€Podman v4.7.0 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«è¨˜è¼‰ãŒã‚ã‚‹é€šã‚Šã€Quadlet ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚
The podman generate systemd command is deprecated. Use Quadlet for running containers and pods under systemd.
ğŸ¦­ Quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹ Quadletã¨Podman Quadletã¯ã€Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’systemdã®ã‚‚ã¨ã§ã„ã„æ„Ÿã˜ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ã‚‚ã¨ã‚‚ã¨Podmanã¨ã¯åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒª containers/quadlet ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ãã®å¾ŒPodman v4.4ã§ containers/podman å†…ã® pkg/systemd ã®ä¸‹ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã¾ã™ã€‚Podman v4."><title>Quadletã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</title><link rel=canonical href=https://blog.nishipy.com/p/podman-quadlet/><link rel=stylesheet href=/scss/style.min.705a41b44c071e70a903c27edfdc8dd99defe50138c4cf4fc42239f4f01aca9e.css><meta property="og:title" content="Quadletã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"><meta property="og:description" content="Header Photo by Amy Asher on Unsplash
ğŸ¦­ ã¯ã˜ã‚ã« Red Hat Advent Calendar 2023 17æ—¥ç›®ã®è¨˜äº‹ğŸ…ã§ã™ã€‚ ã¡ãªã¿ã«ã™ã¹ã¦ å€‹äººã®è¦‹è§£ ã§ã™ã€‚
ğŸ¦­ podman generate systemd ã®éæ¨å¥¨åŒ–ã¨ Quadlet ã‚¨ãƒƒã‚¸ç­‰ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã€systemdã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ¦ãƒ‹ãƒƒãƒˆã¨ã—ã¦Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’åˆ¶å¾¡ã—ãŸã„å ´åˆã€å¾“æ¥ã¯ podman generate systemd ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã€æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸã€‚2023å¹´9æœˆã«ç™ºå£²ã•ã‚ŒãŸæ›¸ç±Podmanã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³(Podman in Actionã‚’Fedora 38/Podman v4.5.1ã‚’å‰æã«æ—¥æœ¬èªè¨³ã—ãŸã‚‚ã®) ã®ã€Œ7ç«  systemdã¨ã®çµ±åˆã€ã§ã‚‚ã€ã“ã®æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚
Podman v4.7.0 ã§ã€ã“ã® `podman generate systemd ã¯deprecated(éæ¨å¥¨)ã¨ãªã‚Šã¾ã—ãŸã€‚systemdã®ã‚‚ã¨ã§Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€Podman v4.7.0 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«è¨˜è¼‰ãŒã‚ã‚‹é€šã‚Šã€Quadlet ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚
The podman generate systemd command is deprecated. Use Quadlet for running containers and pods under systemd.
ğŸ¦­ Quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹ Quadletã¨Podman Quadletã¯ã€Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’systemdã®ã‚‚ã¨ã§ã„ã„æ„Ÿã˜ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ã‚‚ã¨ã‚‚ã¨Podmanã¨ã¯åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒª containers/quadlet ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ãã®å¾ŒPodman v4.4ã§ containers/podman å†…ã® pkg/systemd ã®ä¸‹ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã¾ã™ã€‚Podman v4."><meta property="og:url" content="https://blog.nishipy.com/p/podman-quadlet/"><meta property="og:site_name" content="/home/nishipy"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="podman"><meta property="article:tag" content="quadlet"><meta property="article:tag" content="systemd"><meta property="article:published_time" content="2023-12-17T00:00:00+09:00"><meta property="article:modified_time" content="2023-12-17T00:00:00+09:00"><meta property="og:image" content="https://blog.nishipy.com/p/podman-quadlet/seal.jpg"><meta name=twitter:site content="@iamnishipy"><meta name=twitter:creator content="@iamnishipy"><meta name=twitter:title content="Quadletã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"><meta name=twitter:description content="Header Photo by Amy Asher on Unsplash
ğŸ¦­ ã¯ã˜ã‚ã« Red Hat Advent Calendar 2023 17æ—¥ç›®ã®è¨˜äº‹ğŸ…ã§ã™ã€‚ ã¡ãªã¿ã«ã™ã¹ã¦ å€‹äººã®è¦‹è§£ ã§ã™ã€‚
ğŸ¦­ podman generate systemd ã®éæ¨å¥¨åŒ–ã¨ Quadlet ã‚¨ãƒƒã‚¸ç­‰ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã€systemdã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ¦ãƒ‹ãƒƒãƒˆã¨ã—ã¦Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’åˆ¶å¾¡ã—ãŸã„å ´åˆã€å¾“æ¥ã¯ podman generate systemd ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã€æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸã€‚2023å¹´9æœˆã«ç™ºå£²ã•ã‚ŒãŸæ›¸ç±Podmanã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³(Podman in Actionã‚’Fedora 38/Podman v4.5.1ã‚’å‰æã«æ—¥æœ¬èªè¨³ã—ãŸã‚‚ã®) ã®ã€Œ7ç«  systemdã¨ã®çµ±åˆã€ã§ã‚‚ã€ã“ã®æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚
Podman v4.7.0 ã§ã€ã“ã® `podman generate systemd ã¯deprecated(éæ¨å¥¨)ã¨ãªã‚Šã¾ã—ãŸã€‚systemdã®ã‚‚ã¨ã§Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€Podman v4.7.0 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«è¨˜è¼‰ãŒã‚ã‚‹é€šã‚Šã€Quadlet ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚
The podman generate systemd command is deprecated. Use Quadlet for running containers and pods under systemd.
ğŸ¦­ Quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹ Quadletã¨Podman Quadletã¯ã€Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’systemdã®ã‚‚ã¨ã§ã„ã„æ„Ÿã˜ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ã‚‚ã¨ã‚‚ã¨Podmanã¨ã¯åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒª containers/quadlet ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ãã®å¾ŒPodman v4.4ã§ containers/podman å†…ã® pkg/systemd ã®ä¸‹ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã¾ã™ã€‚Podman v4."><meta name=twitter:card content="summary"><meta name=twitter:image content="https://blog.nishipy.com/p/podman-quadlet/seal.jpg"><link rel="shortcut icon" href=/images/favicon.ico><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4768526216432204" crossorigin=anonymous></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"dark")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/images/favicon.ico width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸˆ</span></figure><div class=site-meta><h1 class=site-name><a href=/>/home/nishipy</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/nishipy target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/iamnishipy target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li><li><a href=https://nishipy.com target=_blank title=Blog rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language-hiragana" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M7 4c0 4.846.0 7 .5 8"/><path d="M10 8.5c0 2.286-2 4.5-3.5 4.5S4 11.865 4 11c0-2 1-3 3-3s5 .57 5 2.857c0 1.524-.667 2.571-2 3.143"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828A4 4 0 109.172 9.172a4 4 0 005.656 5.656z"/><path d="M6.343 17.657l-1.414 1.414"/><path d="M6.343 6.343 4.929 4.929"/><path d="M17.657 6.343l1.414-1.414"/><path d="M17.657 17.657l1.414 1.414"/><path d="M4 12H2"/><path d="M12 4V2"/><path d="M20 12h2"/><path d="M12 20v2"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#-ã¯ã˜ã‚ã«>ğŸ¦­ ã¯ã˜ã‚ã«</a></li><li><a href=#-podman-generate-systemd-ã®éæ¨å¥¨åŒ–ã¨-quadlet>ğŸ¦­ <code>podman generate systemd</code> ã®éæ¨å¥¨åŒ–ã¨ Quadlet</a></li><li><a href=#-quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹>ğŸ¦­ Quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹</a><ul><li><a href=#quadletã¨podman>Quadletã¨Podman</a></li><li><a href=#quadletã¯systemdã®generator>Quadletã¯systemdã®generator</a></li><li><a href=#quadlet-ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼>Quadlet ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼</a></li></ul></li><li><a href=#-quadlet-ã‚’ä½¿ã£ã¦ã¿ã‚‹>ğŸ¦­ Quadlet ã‚’ä½¿ã£ã¦ã¿ã‚‹</a><ul><li><a href=#containerãªquadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨><code>.container</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨</a></li><li><a href=#kubeãªquadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨><code>.kube</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨</a></li></ul></li><li><a href=#-quadlet-ã¯-podman-generate-systemd-ã®ä»£æ›¿ã«ãªã‚‹ã®ã‹>ğŸ¦­ Quadlet ã¯ <code>podman-generate-systemd</code> ã®ä»£æ›¿ã«ãªã‚‹ã®ã‹ï¼Ÿ</a></li><li><a href=#-ãŠã‚ã‚Šã«>ğŸ¦­ ãŠã‚ã‚Šã«</a><ul><li><a href=#-ä½™è«‡containersansible-podman-collections-ã§ã‚‚-quadlet-ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„>ğŸ¦­ (ä½™è«‡)<code>containers/ansible-podman-collections</code> ã§ã‚‚ Quadlet ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„ï¼Ÿ</a></li></ul></li><li><a href=#-references>ğŸ¦­ References</a></li></ul></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/podman-quadlet/><img src=/p/podman-quadlet/seal_hu3d03a01dcc18bc5be0e67db3d8d209a6_555214_800x0_resize_q75_box.jpg srcset="/p/podman-quadlet/seal_hu3d03a01dcc18bc5be0e67db3d8d209a6_555214_800x0_resize_q75_box.jpg 800w, /p/podman-quadlet/seal_hu3d03a01dcc18bc5be0e67db3d8d209a6_555214_1600x0_resize_q75_box.jpg 1600w" width=800 height=532 loading=lazy alt="Featured image of post Quadletã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"></a></div><div class=article-details><header class=article-category><a href=/categories/podman/>podman</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/podman-quadlet/>Quadletã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Dec 17, 2023</time></div></footer></div></header><section class=article-content><section class="toc toc--inline"><h2>Table of contents</h2><div><nav id=TableOfContents><ul><li><a href=#-ã¯ã˜ã‚ã«>ğŸ¦­ ã¯ã˜ã‚ã«</a></li><li><a href=#-podman-generate-systemd-ã®éæ¨å¥¨åŒ–ã¨-quadlet>ğŸ¦­ <code>podman generate systemd</code> ã®éæ¨å¥¨åŒ–ã¨ Quadlet</a></li><li><a href=#-quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹>ğŸ¦­ Quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹</a><ul><li><a href=#quadletã¨podman>Quadletã¨Podman</a></li><li><a href=#quadletã¯systemdã®generator>Quadletã¯systemdã®generator</a></li><li><a href=#quadlet-ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼>Quadlet ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼</a></li></ul></li><li><a href=#-quadlet-ã‚’ä½¿ã£ã¦ã¿ã‚‹>ğŸ¦­ Quadlet ã‚’ä½¿ã£ã¦ã¿ã‚‹</a><ul><li><a href=#containerãªquadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨><code>.container</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨</a></li><li><a href=#kubeãªquadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨><code>.kube</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨</a></li></ul></li><li><a href=#-quadlet-ã¯-podman-generate-systemd-ã®ä»£æ›¿ã«ãªã‚‹ã®ã‹>ğŸ¦­ Quadlet ã¯ <code>podman-generate-systemd</code> ã®ä»£æ›¿ã«ãªã‚‹ã®ã‹ï¼Ÿ</a></li><li><a href=#-ãŠã‚ã‚Šã«>ğŸ¦­ ãŠã‚ã‚Šã«</a><ul><li><a href=#-ä½™è«‡containersansible-podman-collections-ã§ã‚‚-quadlet-ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„>ğŸ¦­ (ä½™è«‡)<code>containers/ansible-podman-collections</code> ã§ã‚‚ Quadlet ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„ï¼Ÿ</a></li></ul></li><li><a href=#-references>ğŸ¦­ References</a></li></ul></nav></div></section><p>Header Photo by <a class=link href="https://unsplash.com/@amyannaasher?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash" target=_blank rel=noopener>Amy Asher</a> on <a class=link href="https://unsplash.com/photos/white-seal-on-soil-giZJHm2m9yY?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash" target=_blank rel=noopener>Unsplash</a></p><h2 id=-ã¯ã˜ã‚ã«>ğŸ¦­ ã¯ã˜ã‚ã«</h2><p><a class=link href=https://qiita.com/advent-calendar/2023/redhat target=_blank rel=noopener>Red Hat Advent Calendar 2023</a> 17æ—¥ç›®ã®è¨˜äº‹ğŸ…ã§ã™ã€‚
ã¡ãªã¿ã«ã™ã¹ã¦ <a class=link href=https://xn--u9jy52g42am02luma.jp/ target=_blank rel=noopener>å€‹äººã®è¦‹è§£</a> ã§ã™ã€‚</p><h2 id=-podman-generate-systemd-ã®éæ¨å¥¨åŒ–ã¨-quadlet>ğŸ¦­ <code>podman generate systemd</code> ã®éæ¨å¥¨åŒ–ã¨ Quadlet</h2><p>ã‚¨ãƒƒã‚¸ç­‰ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã€systemdã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ¦ãƒ‹ãƒƒãƒˆã¨ã—ã¦Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’åˆ¶å¾¡ã—ãŸã„å ´åˆã€å¾“æ¥ã¯ <a class=link href=https://docs.podman.io/en/latest/markdown/podman-generate-systemd.1.html target=_blank rel=noopener><code>podman generate systemd</code></a> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã€æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸã€‚2023å¹´9æœˆã«ç™ºå£²ã•ã‚ŒãŸæ›¸ç±<a class=link href=https://www.shuwasystem.co.jp/book/9784798070209.html target=_blank rel=noopener>Podmanã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</a>(<a class=link href=https://www.manning.com/books/podman-in-action target=_blank rel=noopener>Podman in Action</a>ã‚’Fedora 38/Podman v4.5.1ã‚’å‰æã«æ—¥æœ¬èªè¨³ã—ãŸã‚‚ã®) ã®ã€Œ7ç«  systemdã¨ã®çµ±åˆã€ã§ã‚‚ã€ã“ã®æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚</p><p><img src=/p/podman-quadlet/podman-in-action-jp.jpeg width=1280 height=1280 srcset="/p/podman-quadlet/podman-in-action-jp_huf0e52eaf7cb6a386b59d8a70974dacf5_486848_480x0_resize_q75_box.jpeg 480w, /p/podman-quadlet/podman-in-action-jp_huf0e52eaf7cb6a386b59d8a70974dacf5_486848_1024x0_resize_q75_box.jpeg 1024w" loading=lazy class=gallery-image data-flex-grow=100 data-flex-basis=240px></p><p>Podman v4.7.0 ã§ã€ã“ã® <a class=link href=https://docs.podman.io/en/latest/markdown/podman-generate-systemd.1.html target=_blank rel=noopener>`podman generate systemd</a> ã¯deprecated(éæ¨å¥¨)ã¨ãªã‚Šã¾ã—ãŸã€‚systemdã®ã‚‚ã¨ã§Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€<a class=link href=https://github.com/containers/podman/releases/tag/v4.7.0 target=_blank rel=noopener>Podman v4.7.0 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ</a>ã«è¨˜è¼‰ãŒã‚ã‚‹é€šã‚Šã€<a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html target=_blank rel=noopener>Quadlet</a> ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>The podman generate systemd command is deprecated. Use Quadlet for running containers and pods under systemd.</p></blockquote><h2 id=-quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹>ğŸ¦­ Quadletã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹</h2><h3 id=quadletã¨podman>Quadletã¨Podman</h3><p><a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html target=_blank rel=noopener>Quadlet</a>ã¯ã€Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‚’systemdã®ã‚‚ã¨ã§ã„ã„æ„Ÿã˜ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ã‚‚ã¨ã‚‚ã¨Podmanã¨ã¯åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒª <a class=link href=https://github.com/containers/quadlet target=_blank rel=noopener>containers/quadlet</a> ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ãã®å¾ŒPodman v4.4ã§ <a class=link href=https://github.com/containers/podman/tree/main target=_blank rel=noopener>containers/podman</a> å†…ã® <a class=link href=https://github.com/containers/podman/tree/main/pkg/systemd/quadlet target=_blank rel=noopener>pkg/systemd</a> ã®ä¸‹ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã¾ã™ã€‚<a class=link href=https://github.com/containers/podman/releases/tag/v4.4.0 target=_blank rel=noopener>Podman v4.4.0 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ</a>ã«ã¯ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>Introduce Quadlet, a new systemd-generator that easily writes and maintains systemd services using Podman.</p></blockquote><h3 id=quadletã¯systemdã®generator>Quadletã¯systemdã®generator</h3><p>ãã‚‚ãã‚‚Quadletã¨ã¯ä½•ãªã‚“ã§ã—ã‚‡ã†ã‹ã€‚Quadletã®ä½œè€…ã§ã‚ã‚‹Alexander Larssonã•ã‚“ã®ãƒ–ãƒ­ã‚°<a class=link href="https://blogs.gnome.org/alexl/?s=quadlet" target=_blank rel=noopener><code>Quadlet, an easier way to run system containers</code></a>ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€<a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html target=_blank rel=noopener><code>podman-systemd.unit</code> ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚‚ã‚ã‚ã›ã¦å‚ç…§ã—ã¦ã ã•ã„ã€‚</p><blockquote><p>Quadlet is a systemd generator that takes a container description and automatically generates a systemd service file from it.</p></blockquote><p>ã¤ã¾ã‚‹ã¨ã“ã‚ã€Quadletã¯systemdã®generatorã®ï¼‘ã¤ã§ã™ã€‚generatorã«ã¤ã„ã¦ã¯ã€<a class=link href=https://www.freedesktop.org/software/systemd/man/latest/systemd.generator.html target=_blank rel=noopener><code>systemd.generator(7)</code></a>ã®man pageã«è©³ã—ãèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ChatGPTãã‚“ã«é ¼ã‚“ã§è¦ç´„ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ã€‚</p><blockquote><p><strong>(ChatGPTãã‚“ğŸ¤–):</strong> ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã¯ã€systemdã®ä¸€éƒ¨ã§ã€ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•æ™‚ã‚„è¨­å®šå†èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œã•ã‚Œã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹å‰ã«å‹•çš„ã«ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹å½¹å‰²ã‚’æŒã¤ã€‚ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã¯ã€ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã•ã‚Œã€ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã‚’æ‹¡å¼µãƒ»ä¸Šæ›¸ãã—ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®éšå±¤ã‚’æ‹¡å¼µã™ã‚‹ã€‚å„ªå…ˆåº¦ã®é•ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›ã—ã€systemctl daemon-reloadã§å‰ã®è¨­å®šã‚’æ¶ˆå»ã—ã€ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’å†å®Ÿè¡Œã—ã¦systemdãŒãƒ¦ãƒ‹ãƒƒãƒˆã‚’å†èª­ã¿è¾¼ã‚€ã€‚</p></blockquote><p>ã‚ã‹ã£ãŸæ°—ã«ãªã‚ŒãŸã¨ã“ã‚ã§ã€<a class=link href=https://www.freedesktop.org/software/systemd/man/latest/systemd.generator.html#Examples target=_blank rel=noopener>man pageã®Examples</a>ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯æœ€ã‚‚é¦´æŸ“ã¿æ·±ã„ã§ã‚ã‚ã† <code>Example 1. systemd-fstab-generator</code> ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚Quadletã¨åŒã˜ãgeneratorã®1ã¤ã§ã‚ã‚‹ <a class=link href=https://www.freedesktop.org/software/systemd/man/latest/systemd-fstab-generator.html# target=_blank rel=noopener><code>systemd-fstab-generator</code></a> ãŒã€<code>/etc/fstab</code> ã®å†…å®¹ã‚’ã‚‚ã¨ã«ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚</p><blockquote><p><strong>Example 1. systemd-fstab-generator</strong></p><p>systemd-fstab-generator(8) converts /etc/fstab into native mount units. It uses argv[1] as location to place the generated unit files in order to allow the user to override /etc/fstab with their own native unit files, but also to ensure that /etc/fstab overrides any vendor default from /usr/.</p><p>After editing /etc/fstab, the user should invoke systemctl daemon-reload. This will re-run all generators and cause systemd to reload units from disk. To actually mount new directories added to fstab, systemctl start /path/to/mountpoint or systemctl start local-fs.target may be used.</p></blockquote><p>Quadletã«è©±ã‚’æˆ»ã—ã¾ã—ã‚‡ã†ã€‚æ‰‹å…ƒã®Fedora CoreOS 39ãªç’°å¢ƒã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ã®generatorãŒç½®ã‹ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª <code>/usr/lib/systemd/user-generators/</code> ã‚’è¦—ã„ã¦ã¿ã‚‹ã¨ã€<code>/usr/lib/systemd/user-generators/podman-user-generator</code> ã¨ã„ã†generatorãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ <code>/usr/libexec/podman/quadlet</code> ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ cat /etc/redhat-release 
Fedora release 39 (Thirty Nine)
core@fedora-39:~$ podman version
Client:       Podman Engine
Version:      4.7.2
API Version:  4.7.2
Go Version:   go1.21.1
Built:        Tue Oct 31 23:30:33 2023
OS/Arch:      linux/arm64
ore@fedora-39:~$ ls -l /usr/lib/systemd/user-generators/podman-user-generator 
lrwxrwxrwx. 5 root root 31 Nov 21 04:19 /usr/lib/systemd/user-generators/podman-user-generator -&gt; ../../../libexec/podman/quadlet
</code></pre><p><code>/usr/libexec/podman/quadlet</code> ã¯å®Ÿè¡Œå¯èƒ½ãªãƒã‚¤ãƒŠãƒªã§ã€<code>podman</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ file /usr/libexec/podman/quadlet 
/usr/libexec/podman/quadlet: ELF 64-bit LSB pie executable, ARM aarch64, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-aarch64.so.1, BuildID[sha1]=59f30e7e5606e8c538765862854095113e30a9bb, for GNU/Linux 3.7.0, stripped
core@fedora-39:~$ /usr/libexec/podman/quadlet -h
Usage of /usr/libexec/podman/quadlet:
  -dryrun
        Run in dryrun mode printing debug information
  -no-kmsg-log
        Don&#39;t log to kmsg
  -user
        Run as systemd user
  -v    Print debug information
  -version
        Print version information and exit
core@fedora-39:~$ rpm -qf /usr/libexec/podman/quadlet
podman-4.7.2-1.fc39.aarch64
</code></pre><h3 id=quadlet-ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼>Quadlet ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼</h3><p>QuadletãŒãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®å…ƒãƒ•ã‚¡ã‚¤ãƒ«(ä»¥ä¸‹ã€Quadletãƒ•ã‚¡ã‚¤ãƒ«ã¨å‘¼ã‚“ã§ã¿ã¾ã™)ã®å½¢å¼ã«ã¤ã„ã¦ã¯ã€<a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html target=_blank rel=noopener><code>podman-systemd.unit(5)</code></a>ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚</p><p>Quadletãƒ•ã‚¡ã‚¤ãƒ«ã®ç½®ãå ´æ‰€ã¯ã€rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨rootlessãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ç•°ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã„ãšã‚Œã‹ã«ãŠã‘ã°ã„ã„ã‚ˆã†ã§ã™ã€‚</p><ul><li>rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆ:<ul><li><code>/usr/share/containers/systemd/</code></li><li><code>/etc/containers/systemd/</code></li></ul></li><li>rootlessãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆ:<ul><li><code>$HOME/.config/containers/systemd/</code></li><li><code>$XDG_CONFIG_HOME/containers/systemd/</code></li><li><code>/etc/containers/systemd/users/$(UID)</code></li><li><code>/etc/containers/systemd/users/</code></li></ul></li></ul><p>ä¾‹ãˆã°ã€Podmanã‚³ãƒ³ãƒ†ãƒŠã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã§<code>.container</code>ã¨ã„ã†æ‹¡å¼µå­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚Œã°ã„ã„ã‚ˆã†ã§ã™ã€‚systemdã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ä¼¼ãŸå½¢å¼ã§ã™ã­ã€‚å®Ÿéš›ã€<code>[Service]</code> ã¨ <code>[Install]</code> ã¨ã„ã†éƒ¨åˆ†ã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ã‚ˆã†ã«æ›¸ã‘ã‚‹ã‚ˆã†ã§ã™ã€‚ä¸€æ–¹ã€<code>[Container]</code> ã¯Quadletç‰¹æœ‰ã§ã™ã­ã€‚ä»–ã®ä¾‹ã¯<a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html#examples target=_blank rel=noopener><code>podman-systemd.unit(5)</code>ã®Examples</a>ã‚’å‚ç…§ãã ã•ã„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>A minimal container</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Container]</span>
</span></span><span class=line><span class=cl><span class=c1># Use the centos image</span>
</span></span><span class=line><span class=cl><span class=na>Image</span><span class=o>=</span><span class=s>quay.io/centos/centos:latest</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Use volume and network defined below</span>
</span></span><span class=line><span class=cl><span class=na>Volume</span><span class=o>=</span><span class=s>test.volume:/data</span>
</span></span><span class=line><span class=cl><span class=na>Network</span><span class=o>=</span><span class=s>test.network</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># In the container we just run sleep</span>
</span></span><span class=line><span class=cl><span class=na>Exec</span><span class=o>=</span><span class=s>sleep 60</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=c1># Restart service when sleep finishes</span>
</span></span><span class=line><span class=cl><span class=na>Restart</span><span class=o>=</span><span class=s>always</span>
</span></span><span class=line><span class=cl><span class=c1># Extend Timeout to allow time to pull the image</span>
</span></span><span class=line><span class=cl><span class=na>TimeoutStartSec</span><span class=o>=</span><span class=s>900</span>
</span></span><span class=line><span class=cl><span class=c1># ExecStartPre flag and other systemd commands can go here, see systemd.unit(5) man page.</span>
</span></span><span class=line><span class=cl><span class=na>ExecStartPre</span><span class=o>=</span><span class=s>/usr/share/mincontainer/setup.sh</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=c1># Start by default on boot</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target default.target</span>
</span></span></code></pre></td></tr></table></div></div><p>Quadletã§ã¯ <code>[Container]</code> ä»¥å¤–ã«ã‚‚ã€<code>[Kube]</code> ã‚„ <code>[Volume]</code>ã€<code>[Network]</code>ã€<code>[Image]</code> ã¨ã„ã†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå®šç¾©ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚ç‰¹ã«Kubernetesã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã‚‹ <code>[Kube]</code> ã¯ä¾¿åˆ©ãã†ã§ã™ã€‚<code>podman kube play</code> ã®ãŠã‹ã’ã§ã™ã­ã€‚ã¡ãªã¿ã«ã€Kubernetesã¨Podmanã®é€£æºã«ã¤ã„ã¦ã‚‚ã€<a class=link href=https://www.shuwasystem.co.jp/book/9784798070209.html target=_blank rel=noopener>Podmanã‚¤ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</a>ã®ã€Œ8ç«  Kubernetesã¨ã®é€£æºã€ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™(å®£ä¼)ã€‚</p><h2 id=-quadlet-ã‚’ä½¿ã£ã¦ã¿ã‚‹>ğŸ¦­ Quadlet ã‚’ä½¿ã£ã¦ã¿ã‚‹</h2><p>ã“ã®ç« ã§ä½¿ã†Quadletãƒ•ã‚¡ã‚¤ãƒ«ãŠã‚ˆã³Kubernetes YAMLãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€<a class=link href=https://github.com/nishipy/nishipy.github.io/tree/main/content/post/podman-quadlet/manifests target=_blank rel=noopener>ã“ã®ãƒ–ãƒ­ã‚°ã®GitHubãƒªãƒã‚¸ãƒˆãƒª</a>ã«ç½®ã„ã¦ã„ã¾ã™ã€‚</p><h3 id=containerãªquadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨><code>.container</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨</h3><p>Podmanã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®Quadletãƒ•ã‚¡ã‚¤ãƒ« <code>podman-hello.container</code> ã‚’ä½œæˆã—ã¾ã—ãŸã€‚<code>oneshot</code> ã§ <a class=link href=https://github.com/containers/PodmanHello/blob/main/podman_hello_world.c target=_blank rel=noopener><code>podman_hello_world</code></a> ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã™ã€‚rootlessãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½¿ã†ã®ã§ã€<code>$HOME/.config/containers/systemd/</code> ã«ç½®ã„ã¦ã„ã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>Hello World from Podman</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Container]</span>
</span></span><span class=line><span class=cl><span class=na>Image</span><span class=o>=</span><span class=s>quay.io/podman/hello:latest</span>
</span></span><span class=line><span class=cl><span class=na>Exec</span><span class=o>=</span><span class=s>/usr/local/bin/podman_hello_world</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>Restart</span><span class=o>=</span><span class=s>no</span>
</span></span><span class=line><span class=cl><span class=na>Type</span><span class=o>=</span><span class=s>oneshot</span>
</span></span><span class=line><span class=cl><span class=na>TimeoutStartSec</span><span class=o>=</span><span class=s>300</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target default.target</span>
</span></span></code></pre></td></tr></table></div></div><p>ã“ã®Quadletãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã©ã®ã‚ˆã†ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã‹ã¯ã€<code>quadlet -dryrun -user</code> ã§ç¢ºèªã§ãã¾ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ /usr/libexec/podman/quadlet -dryrun -user
quadlet-generator[21202]: Loading source unit file /var/home/core/.config/containers/systemd/podman-hello.container
---podman-hello.service---
[Unit]
Description=Hello World from Podman
SourcePath=/var/home/core/.config/containers/systemd/podman-hello.container
RequiresMountsFor=%t/containers

[X-Container]
Image=quay.io/podman/hello:latest
Exec=/usr/local/bin/podman_hello_world

[Service]
Restart=no
Type=oneshot
TimeoutStartSec=300
Environment=PODMAN_SYSTEMD_UNIT=%n
KillMode=mixed
ExecStop=/usr/bin/podman rm -f -i --cidfile=%t/%N.cid
ExecStopPost=-/usr/bin/podman rm -f -i --cidfile=%t/%N.cid
Delegate=yes
SyslogIdentifier=%N
ExecStart=/usr/bin/podman run --name=systemd-%N --cidfile=%t/%N.cid --replace --rm --cgroups=split quay.io/podman/hello:latest /usr/local/bin/podman_hello_world

[Install]
WantedBy=multi-user.target default.target
</code></pre><p><code>.container</code> ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã¯<a class=link href=https://github.com/containers/podman/blob/main/pkg/systemd/quadlet/quadlet.go#L398-L402 target=_blank rel=noopener>ã“ã®è¾º</a>ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¨ã¦ã‚‚é•·ã„ã§ã™ãŒã€Quadletãƒ•ã‚¡ã‚¤ãƒ«ã® <code>[Container]</code> ã®ä¸‹ã«æ›¸ã‹ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã²ãŸã™ã‚‰å¤‰æ›ã—ã¦ã€<code>ExecStart=/usr/bin/podman run</code> ã®å¼•æ•°ã«è¿½åŠ ã—ã¦ã„ã£ã¦ã‚‹ã®ãŒã‚ã‹ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€Quadletãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ãŸå¾Œ <code>systemctl --user daemon-reload</code> ã™ã‚‹ã¨ã€<code>podman-hello.service</code> ã¨ã„ã†ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã•ã‚Œã¾ã™ã€‚å†…å®¹ã¯å…ˆç¨‹ <code>quadlet -dryrun -user</code> ã§ç¢ºèªã—ãŸã‚‚ã®ã¨åŒã˜ã§ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ systemctl --user daemon-reload
core@fedora-39:~$ file /run/user/$UID/systemd/generator/podman-hello.service
/run/user/501/systemd/generator/podman-hello.service: ASCII text
core@fedora-39:~$ file /run/user/$UID/systemd/generator/*/podman-hello.service
/run/user/501/systemd/generator/default.target.wants/podman-hello.service:    symbolic link to ../podman-hello.service
/run/user/501/systemd/generator/multi-user.target.wants/podman-hello.service: symbolic link to ../podman-hello.service
</code></pre><p>ã“ã®systemdã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã™ã‚‹ã¨ã€ğŸ¦­ãŒæŒ¨æ‹¶ã ã‘ã—ã¦ã™ãå¸°ã£ã¦ã„ãã¯ãšã§ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ systemctl --user start podman-hello.service
core@fedora-39:~$ journalctl --user -u podman-hello.service
Dec 11 19:06:34 fedora-39 podman[22326]: 2023-12-11 19:06:34.164871911 +0900 JST m=+0.116574772 container start 3c1197296f89b6f70afb20a6ac01fa53f41f7bca1875578bffb965749984ffac (image=quay.io/podman/hello:latest, name=syst&gt;
Dec 11 19:06:34 fedora-39 podman[22326]: 2023-12-11 19:06:34.165512076 +0900 JST m=+0.117214937 container attach 3c1197296f89b6f70afb20a6ac01fa53f41f7bca1875578bffb965749984ffac (image=quay.io/podman/hello:latest, name=sys&gt;
Dec 11 19:06:34 fedora-39 podman-hello[22326]: !... Hello Podman World ...!
Dec 11 19:06:34 fedora-39 podman-hello[22326]:          .--&#34;--.
Dec 11 19:06:34 fedora-39 podman-hello[22326]:        / -     - \
Dec 11 19:06:34 fedora-39 podman-hello[22326]:       / (O)   (O) \
Dec 11 19:06:34 fedora-39 podman-hello[22326]:    ~~~| -=(,Y,)=- |
Dec 11 19:06:34 fedora-39 podman-hello[22326]:     .---. /`  \   |~~
Dec 11 19:06:34 fedora-39 podman-hello[22326]:  ~/  o  o \~~~~.----. ~~
Dec 11 19:06:34 fedora-39 podman-hello[22326]:   | =(X)= |~  / (O (O) \
Dec 11 19:06:34 fedora-39 podman-hello[22326]:    ~~~~~~~  ~| =(Y_)=-  |
Dec 11 19:06:34 fedora-39 podman-hello[22326]:   ~~~~    ~~~|   U      |~~
Dec 11 19:06:34 fedora-39 podman-hello[22326]: Project:   https://github.com/containers/podman
Dec 11 19:06:34 fedora-39 podman-hello[22326]: Website:   https://podman.io
Dec 11 19:06:34 fedora-39 podman-hello[22326]: Documents: https://docs.podman.io
Dec 11 19:06:34 fedora-39 podman-hello[22326]: Twitter:   @Podman_io
Dec 11 19:06:34 fedora-39 podman[22326]: 2023-12-11 19:06:34.1658957 +0900 JST m=+0.117598561 container died 3c1197296f89b6f70afb20a6ac01fa53f41f7bca1875578bffb965749984ffac (image=quay.io/podman/hello:latest, name=systemd&gt;
Dec 11 19:06:34 fedora-39 podman[22399]: 2023-12-11 19:06:34.23270892 +0900 JST m=+0.060999942 container remove 3c1197296f89b6f70afb20a6ac01fa53f41f7bca1875578bffb965749984ffac (image=quay.io/podman/hello:latest, name=syst&gt;
Dec 11 19:06:34 fedora-39 systemd[985]: Finished podman-hello.service - Hello World from Podman.
</code></pre><h3 id=kubeãªquadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨><code>.kube</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨</h3><p>ä»–ã®Quadletãƒ•ã‚¡ã‚¤ãƒ«ã‚‚è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<code>.kube</code> ã¨ã„ã†æ‹¡å¼µå­ã®Quadletãƒ•ã‚¡ã‚¤ãƒ«ã« <code>[Kube]</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ã¨ã€<a class=link href=https://docs.podman.io/en/latest/markdown/podman-kube-play.1.html target=_blank rel=noopener><code>podman kube play</code></a> ã‚’å®Ÿè¡Œã™ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p><p><a class=link href=https://docs.podman.io/en/latest/markdown/podman-kube-play.1.html target=_blank rel=noopener><code>podman kube play</code></a> ã§ã¯ã€KubernetesãªYAMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Podmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã€Volumeãªã©ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚åŸ·ç­†æ™‚ç‚¹ã§æœ€æ–°ã®Podman v4.8.0ã§ã¯ã€ä»¥ä¸‹ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>Pod</li><li>Deployment</li><li>PersistentVolumeClaim</li><li>ConfigMap</li><li>Secret</li><li>DaemonSet</li></ul><p>ã¨ã„ã†ã“ã¨ã§ã€ã¾ãšã¯Kubernetes YAMLã®æº–å‚™ã§ã™ã€‚ä»Šå›ã¯ <code>Pod</code> ã¨ <code>ConfigMap</code> ã‚’ä½¿ã„ãŸã„ã®ã§ã€Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ <a class=link href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/ target=_blank rel=noopener>Configure a Pod to Use a ConfigMap</a> ã«è¼‰ã£ã¦ã„ã‚‹ä¾‹ã‚’æ‹å€Ÿã—ã¾ã™ã€‚</p><p>ConfigMapã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¯ã“ã‚Œã§ã€</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>special-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>special.how</span><span class=p>:</span><span class=w> </span><span class=l>very</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>special.type</span><span class=p>:</span><span class=w> </span><span class=l>charm</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Podã¯ã“ã‚Œã§ã™ã€‚very charmãªPodãŒã§ããã†ãªäºˆæ„Ÿã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>dapi-test-pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.k8s.io/busybox</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&#34;/bin/sh&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-c&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;env&#34;</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>envFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>configMapRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>special-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Never</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æº–å‚™ãŒã§ããŸã¨ã“ã‚ã§ã€<code>.kube</code>ãªQuadletãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚<code>[Kube]</code>ã®ã¨ã“ã‚ã¯ã€â†‘ã®YAMLã®ãƒ‘ã‚¹ã‚’ãã®ã¾ã¾æŒ‡å®šã™ã‚Œã°ã„ã„ã ã‘ã§ã¨ã¦ã‚‚æ¥½ã§ã™ã€‚ConfigMapãŒè¤‡æ•°ã‚ã‚‹å ´åˆã«ã¯ã€<a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html#configmap target=_blank rel=noopener><code>ConfigMap=</code></a>ã®è¡Œã‚’å¿…è¦ãªåˆ†ã ã‘è¶³ã—ã¦ã„ã‘ã°ã„ã„ã‚‰ã—ã„ã§ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>A Service of very charm Pod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Kube]</span>
</span></span><span class=line><span class=cl><span class=na>Yaml</span><span class=o>=</span><span class=s>/tmp/quadlet-in-action/pod-configmap-envFrom.yaml</span>
</span></span><span class=line><span class=cl><span class=na>ConfigMap</span><span class=o>=</span><span class=s>/tmp/quadlet-in-action/special-config.yaml</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>Restart</span><span class=o>=</span><span class=s>no</span>
</span></span><span class=line><span class=cl><span class=na>TimeoutStartSec</span><span class=o>=</span><span class=s>300</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target default.target</span>
</span></span></code></pre></td></tr></table></div></div><p>ã“ã‚“ãªã®ã§å‹•ãã®ã‹ä¸å®‰ãªã®ã§ <code>quadlet -dryrun -user</code> ã—ã¦ã¿ã‚‹ã¨ã€ã¡ã‚ƒã‚“ã¨ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›ã•ã‚Œã¾ã—ãŸã€‚<code>.container</code> ã®ã¨ãã¨é•ã£ã¦ã€<code>ExecStart</code> ã«ã¯ <code>podman kube play</code> ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ /usr/libexec/podman/quadlet -dryrun -user ~/.config/containers/systemd/special-pod.kube
...snip...
quadlet-generator[42819]: Loading source unit file /var/home/core/.config/containers/systemd/special-pod.kube
...snip...
---special-pod.service---
[Unit]
Description=A Service of very charm Pod
SourcePath=/var/home/core/.config/containers/systemd/special-pod.kube
RequiresMountsFor=%t/containers

[X-Kube]
Yaml=/tmp/quadlet-in-action/pod-configmap-envFrom.yaml
ConfigMap=/tmp/quadlet-in-action/special-config.yaml

[Service]
Restart=no
Type=notify
TimeoutStartSec=300
KillMode=mixed
Environment=PODMAN_SYSTEMD_UNIT=%n
NotifyAccess=all
SyslogIdentifier=%N
ExecStart=/usr/bin/podman kube play --replace --service-container=true --configmap /tmp/quadlet-in-action/special-config.yaml /tmp/quadlet-in-action/pod-configmap-envFrom.yaml
ExecStopPost=/usr/bin/podman kube down /tmp/quadlet-in-action/pod-configmap-envFrom.yaml

[Install]
WantedBy=multi-user.target default.target
</code></pre><p>å¿˜ã‚Œãšã« <code>systemctl --user daemon-reload</code> ã—ãŸå¾Œã€<code>special-pod.service</code> ã‚’èµ·å‹•ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚very charmãªã‚³ãƒ³ãƒ†ãƒŠãŒsystemdã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><pre tabindex=0><code>core@fedora-39:~$ systemctl --user daemon-reload
core@fedora-39:~$ systemctl --user start special-pod.service
core@fedora-39:~$ journalctl --user -u special-pod.service --grep &#34;special\.&#34;
Dec 12 01:59:06 fedora-39 dapi-test-pod-test-container[327907]: special.type=charm
Dec 12 01:59:06 fedora-39 dapi-test-pod-test-container[327907]: special.how=very
</code></pre><h2 id=-quadlet-ã¯-podman-generate-systemd-ã®ä»£æ›¿ã«ãªã‚‹ã®ã‹>ğŸ¦­ Quadlet ã¯ <code>podman-generate-systemd</code> ã®ä»£æ›¿ã«ãªã‚‹ã®ã‹ï¼Ÿ</h2><p>å€‹äººçš„ãªæ„è¦‹ã¨ã—ã¦ã€<code>podman-generate-systemd</code> ã«æ…£ã‚Œè¦ªã—ã‚“ã ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Quadlet ãŒä»£æ›¿ã¨è¨€ã‚ã‚Œã‚‹ã¨ãƒ¢ãƒ¤ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã¨ã„ã†ã®ã‚‚ã€<code>podman-generate-systemd</code> ã§ã¯æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ä¸€æ–¹ã€Quadlet ãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªåˆ†ã§æ›¸ãå¿…è¦ãŒã‚ã‚Šã€<code>podman-generate-systemd</code> ã®ã‚ˆã†ã«æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã‹ã‚‰Quadlet ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ã“ã®è¾ºã‚Šã¯ã€<a class=link href=https://github.com/containers/podman/discussions/20218 target=_blank rel=noopener>containers/podman ã® Discussion#20218</a>ã®é€šã‚Šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã‚‚è­°è«–ã•ã‚Œã¦ã„ã¾ã™ã€‚<code>How to replace the "podman generate systemd" command since its deprecated</code> ã¨ã„ã†è³ªå•ã«å¯¾ã—ã¦ã€Podmanã®MaintainerãŒæŠ•ç¨¿ã—ãŸä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒãƒ™ã‚¹ãƒˆã‚¢ãƒ³ã‚µãƒ¼ã«é¸ã°ã‚Œã¦ã„ã¾ã™ã€‚</p><blockquote><p>I do not want to add that functionality to Podman as the ultimately goal is to move away from the workflow of generating systemd units based on existing containers. With Quadlet we aim at a Compose and K8s-like declarative workflow. Adding podman generate quadlet conflicts with that goal and it would imply that new Quadlet features had to be added there as well.
The current strategy is to deprecate podman generate systemd. That means that no new features will be added to generate systemd but only bug fixes.</p></blockquote><p>ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‹ã‚‰åˆ†ã‹ã‚‹ã‚ˆã†ã«ã€Podmanã¯æœ€çµ‚çš„ã«ã¯æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹æ—¢å­˜ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‹ã‚‰è„±å´ã—ã¦ã€Kubernetesã‚„Composeã®ã‚ˆã†ãªå®£è¨€çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç›®æŒ‡ã—ã¦ãŠã‚Šã€ã“ã‚ŒãŒPodmanã«Quadletã‚’ãƒãƒ¼ã‚¸ã—ãŸç›®çš„ã¨ã®ã“ã¨ã€‚ã“ã®ã‚´ãƒ¼ãƒ«ã¨è¡çªã™ã‚‹ãŸã‚ã€Quadletãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ã‚’Podmanã«è¿½åŠ ã™ã‚‹äºˆå®šã¯ãªã„ã‚ˆã†ã§ã™ã€‚</p><p>ç¢ºã‹ã«Quadletã¯ã‚³ãƒ³ãƒ†ãƒŠã‚„Podã ã‘ã§ãªãã€Networkã‚„Volumeã€Imageã‚‚å®£è¨€çš„ã«æ›¸ãã“ã¨ãŒã§ãå†é…å¸ƒã—ã‚„ã™ã„ã§ã™ã­ã€‚Kubernetes YAMLã‚’ä½¿ã£ãŸPodmanã‚³ãƒ³ãƒ†ãƒŠã‚„Podã®èµ·å‹•ã‚’systemdã¨é€£æºã§ãã‚‹ã®ã‚‚é­…åŠ›ã§ã™ã€‚</p><p>ã¡ãªã¿ã«ã€<code>podman run</code> ã‚³ãƒãƒ³ãƒ‰ãªã©ã‹ã‚‰Quadletãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ <a class=link href=https://github.com/k9withabone/podlet target=_blank rel=noopener><code>podlet</code></a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã¯é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p><h2 id=-ãŠã‚ã‚Šã«>ğŸ¦­ ãŠã‚ã‚Šã«</h2><p>ä»¥ä¸Šã§ã€Podmanã¨systemdã‚’é€£æºã•ã›ã‚‹Quadletã‚’å®Œå…¨ã«ç†è§£ã§ãã¾ã—ãŸã€‚Podmanãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹ã¯ã‚‚ã¡ã‚ã‚“ã€Dockerãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ–¹ã‚‚èˆˆå‘³ã‚ã‚Œã°ãœã²è§¦ã£ã¦ã¿ã¦ãã ã•ã„ã€‚Windowsã‚„Macã‚’ãŠä½¿ã„ã§ã‚‚ã€<a class=link href=https://podman-desktop.io/ target=_blank rel=noopener>Podman Desktop</a>ã§ç°¡å˜ã«è©¦ã›ã‚‹ã¨æ€ã„ã¾ã™ã€‚Quadletã§éŠã³ãŸã„å ´åˆã¯ã€systemdãŒinitãƒ—ãƒ­ã‚»ã‚¹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€<a class=link href=https://docs.podman.io/en/stable/markdown/podman-machine-init.1.html target=_blank rel=noopener><code>podman machine init</code></a> ã—ã¦ <code>Fedora CoreOS</code> ã®VMã‚’ä½œæˆã—ãŸå¾Œã«ã€<a class=link href=https://docs.podman.io/en/stable/markdown/podman-machine-ssh.1.html target=_blank rel=noopener><code>podman machine ssh</code></a>ã—ã¦è©¦ã™ã®ãŒç°¡å˜ã§ã™ã€‚</p><pre tabindex=0><code>[nishipy-MBP] $ podman machine list
NAME        VM TYPE     CREATED     LAST UP            CPUS        MEMORY      DISK SIZE
fedoracos*  qemu        4 days ago  Currently running  1           2GiB        100GiB
[nishipy-MBP] $ podman machine ssh fedoracos 
Connecting to vm fedoracos. To close connection, use `~.` or `exit`
Fedora CoreOS 39.20231119.2.0
Tracker: https://github.com/coreos/fedora-coreos-tracker
Discuss: https://discussion.fedoraproject.org/tag/coreos

Last login: Fri Dec 11 20:12:59 2023 from 192.168.127.1
core@fedora-39:~$ 
</code></pre><p>ä»¥ä¸Šã§ã™ã€‚ã“ã®è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ãŒæ€’ã‚‰ã‚Œãªã„ã“ã¨ã‚’ç¥ˆã‚Šã¤ã¤&mldr;ğŸ…</p><h3 id=-ä½™è«‡containersansible-podman-collections-ã§ã‚‚-quadlet-ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„>ğŸ¦­ (ä½™è«‡)<code>containers/ansible-podman-collections</code> ã§ã‚‚ Quadlet ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„ï¼Ÿ</h3><p>æœ€è¿‘Pythonã‚’æ›¸ããŸããªã£ãŸæ™‚ã«PRé€ã£ã¦ã„ã‚‹ Ansible Collection <a class=link href=https://github.com/containers/ansible-podman-collections target=_blank rel=noopener><code>containers/ansible-podman-collections</code></a> ã§ã‚‚ã€Quadletã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«/ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸã„ãªã€œã¨æ€ã„ã€Issueä½œã£ã¦ææ¡ˆã—ã¦ã¿ã¾ã—ãŸã€‚Quadletãƒ•ã‚¡ã‚¤ãƒ«è©³ã—ã„äººã¯ã€<code>ansible.builtin.template</code> moduleä½¿ã†æ°—ã‚‚ã—ã¾ã™ãŒ&mldr;</p><p><a class=link href=https://github.com/containers/ansible-podman-collections/issues/671 target=_blank rel=noopener>https://github.com/containers/ansible-podman-collections/issues/671</a></p><h2 id=-references>ğŸ¦­ References</h2><ul><li><a class=link href="https://blogs.gnome.org/alexl/?s=quadlet" target=_blank rel=noopener>Quadlet, an easier way to run system containers | Alexander Larsson</a></li><li><a class=link href=https://www.redhat.com/sysadmin/quadlet-podman target=_blank rel=noopener>Make systemd better for Podman with Quadlet | Red Hat - Enable Sysadmin</a></li><li><a class=link href=https://www.redhat.com/sysadmin/multi-container-application-podman-quadlet target=_blank rel=noopener>Deploying a multi-container application using Podman and Quadlet | Red Hat - Enable Sysadmin</a></li><li><a class=link href=https://github.com/containers/podman/discussions/20218 target=_blank rel=noopener>How to replace the &ldquo;podman generate systemd&rdquo; command since its deprecated #20218 - containers/podman | GitHub</a></li><li><a class=link href=https://docs.podman.io/en/latest/markdown/podman-generate-systemd.1.html target=_blank rel=noopener>podman-generate-systemd(1) | Podman Docs</a></li><li><a class=link href=https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html target=_blank rel=noopener>podman-systemd.unit(5) | Podman Docs</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/podman/>podman</a>
<a href=/tags/quadlet/>quadlet</a>
<a href=/tags/systemd/>systemd</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=share-buttons><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=Quadlet%e3%82%a4%e3%83%b3%e3%83%bb%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3&url=https%3a%2f%2fblog.nishipy.com%2fp%2fpodman-quadlet%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nishipy.com%2fp%2fpodman-quadlet%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.nishipy.com%2fp%2fpodman-quadlet%2f&title=Quadlet%e3%82%a4%e3%83%b3%e3%83%bb%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3&summary=Quadlet%e3%82%a4%e3%83%b3%e3%83%bb%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3&source=https%3a%2f%2fblog.nishipy.com%2fp%2fpodman-quadlet%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6.0 2.5 1 2.6 2.5.0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fblog.nishipy.com%2fp%2fpodman-quadlet%2f&resubmit=true&title=Quadlet%e3%82%a4%e3%83%b3%e3%83%bb%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=Quadlet%e3%82%a4%e3%83%b3%e3%83%bb%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%20https%3a%2f%2fblog.nishipy.com%2fp%2fpodman-quadlet%2f" target=_blank rel=noopener aria-label><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3.0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7.0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1.0-5.2 4.2-9.4 9.4-9.4 2.5.0 4.9 1 6.7 2.8s2.8 4.2 2.8 6.7c-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2s0-.5.1-.6.3-.3.4-.5c.2-.1.3-.3.4-.5s0-.4.0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/></svg></div></div></a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><footer class=site-footer><section class=copyright>&copy;
2023 -
2024 /home/nishipy</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>